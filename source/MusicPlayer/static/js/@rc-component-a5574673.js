import{c as b,f as oa,g as Pa,e as U,h as Na}from"./@babel-5ecd552a.js";import{r as t}from"./react-e928f451.js";import{r as Ea}from"./react-dom-964dd389.js";import{c as _r,a as K,d as Wa,u as za,r as va,s as Da,e as Ta,f as xa,h as Ba,i as Ue,j as ia,k as Ha,l as ca,g as ua,m as Fa,n as _a}from"./rc-util-4d7ee22f.js";import{c as rr}from"./classnames-9c02366a.js";import{R as ka}from"./rc-resize-observer-5ae9b312.js";import{C as La}from"./rc-motion-19ec1687.js";import"./react-is-e5978b8b.js";var Ra=t.createContext(null),fa=[];function Va(e,a){var r=t.useState(function(){if(!_r())return null;var m=document.createElement("div");return m}),n=b(r,1),i=n[0],l=t.useRef(!1),v=t.useContext(Ra),c=t.useState(fa),d=b(c,2),h=d[0],P=d[1],g=v||(l.current?void 0:function(m){P(function(S){var T=[m].concat(oa(S));return T})});function D(){i.parentElement||document.body.appendChild(i),l.current=!0}function f(){var m;(m=i.parentElement)===null||m===void 0||m.removeChild(i),l.current=!1}return K(function(){return e?v?v(D):D():f(),f},[e]),K(function(){h.length&&(h.forEach(function(m){return m()}),P(fa))},[h]),[i,g]}function Aa(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Ua="rc-util-locker-".concat(Date.now()),da=0;function qa(e){var a=!!e,r=t.useState(function(){return da+=1,"".concat(Ua,"_").concat(da)}),n=b(r,1),i=n[0];K(function(){if(a){var l=Wa(document.body).width,v=Aa();za(`
html body {
  overflow-y: hidden;
  `.concat(v?"width: calc(100% - ".concat(l,"px);"):"",`
}`),i)}else va(i);return function(){va(i)}},[a,i])}var ha=!1;function Qa(e){return typeof e=="boolean"&&(ha=e),ha}var ma=function(a){return a===!1?!1:!_r()||!a?null:typeof a=="string"?document.querySelector(a):typeof a=="function"?a():a},$a=t.forwardRef(function(e,a){var r=e.open,n=e.autoLock,i=e.getContainer;e.debug;var l=e.autoDestroy,v=l===void 0?!0:l,c=e.children,d=t.useState(r),h=b(d,2),P=h[0],g=h[1],D=P||r;t.useEffect(function(){(v||r)&&g(r)},[r,v]);var f=t.useState(function(){return ma(i)}),m=b(f,2),S=m[0],T=m[1];t.useEffect(function(){var A=ma(i);T(A!=null?A:null)});var E=Va(D&&!S),k=b(E,2),y=k[0],u=k[1],x=S!=null?S:y;qa(n&&r&&_r()&&(x===y||x===document.body));var q=null;if(c&&Da(c)&&a){var j=c;q=j.ref}var Z=Ta(q,a);if(!D||!_r()||S===void 0)return null;var re=x===!1||Qa(),_=c;return a&&(_=t.cloneElement(c,{ref:Z})),t.createElement(Ra.Provider,{value:u},re?_:Ea.createPortal(_,x))});function ja(e){var a=e.prefixCls,r=e.align,n=e.arrow,i=e.arrowPos,l=n||{},v=l.className,c=l.content,d=i.x,h=d===void 0?0:d,P=i.y,g=P===void 0?0:P,D=t.useRef();if(!r||!r.points)return null;var f={position:"absolute"};if(r.autoArrow!==!1){var m=r.points[0],S=r.points[1],T=m[0],E=m[1],k=S[0],y=S[1];T===k||!["t","b"].includes(T)?f.top=g:T==="t"?f.top=0:f.bottom=0,E===y||!["l","r"].includes(E)?f.left=h:E==="l"?f.left=0:f.right=0}return t.createElement("div",{ref:D,className:rr("".concat(a,"-arrow"),v),style:f},c)}function Ia(e){var a=e.prefixCls,r=e.open,n=e.zIndex,i=e.mask,l=e.motion;return i?t.createElement(La,Pa({},l,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(v){var c=v.className;return t.createElement("div",{style:{zIndex:n},className:rr("".concat(a,"-mask"),c)})}):null}var Ja=t.memo(function(e){var a=e.children;return a},function(e,a){return a.cache}),Ga=t.forwardRef(function(e,a){var r=e.popup,n=e.className,i=e.prefixCls,l=e.style,v=e.target,c=e.onVisibleChanged,d=e.open,h=e.keepDom,P=e.fresh,g=e.onClick,D=e.mask,f=e.arrow,m=e.arrowPos,S=e.align,T=e.motion,E=e.maskMotion,k=e.forceRender,y=e.getPopupContainer,u=e.autoDestroy,x=e.portal,q=e.zIndex,j=e.onMouseEnter,Z=e.onMouseLeave,re=e.onPointerEnter,_=e.ready,A=e.offsetX,de=e.offsetY,he=e.offsetR,ie=e.offsetB,me=e.onAlign,W=e.onPrepare,B=e.stretch,M=e.targetWidth,Y=e.targetHeight,L=typeof r=="function"?r():r,ue=d||h,ae=(y==null?void 0:y.length)>0,ar=t.useState(!y||!ae),qe=b(ar,2),ge=qe[0],Qe=qe[1];if(K(function(){!ge&&ae&&v&&Qe(!0)},[ge,ae,v]),!ge)return null;var te="auto",H={left:"-1000vw",top:"-1000vh",right:te,bottom:te};if(_||!d){var X,le=S.points,se=S.dynamicInset||((X=S._experimental)===null||X===void 0?void 0:X.dynamicInset),je=se&&le[0][1]==="r",tr=se&&le[0][0]==="b";je?(H.right=he,H.left=te):(H.left=A,H.right=te),tr?(H.bottom=ie,H.top=te):(H.top=de,H.bottom=te)}var V={};return B&&(B.includes("height")&&Y?V.height=Y:B.includes("minHeight")&&Y&&(V.minHeight=Y),B.includes("width")&&M?V.width=M:B.includes("minWidth")&&M&&(V.minWidth=M)),d||(V.pointerEvents="none"),t.createElement(x,{open:k||ue,getContainer:y&&function(){return y(v)},autoDestroy:u},t.createElement(Ia,{prefixCls:i,open:d,zIndex:q,mask:D,motion:E}),t.createElement(ka,{onResize:me,disabled:!d},function(Ie){return t.createElement(La,Pa({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:k,leavedClassName:"".concat(i,"-hidden")},T,{onAppearPrepare:W,onEnterPrepare:W,visible:d,onVisibleChanged:function(I){var ye;T==null||(ye=T.onVisibleChanged)===null||ye===void 0||ye.call(T,I),c(I)}}),function(be,I){var ye=be.className,w=be.style,Ne=rr(i,ye,n);return t.createElement("div",{ref:xa(Ie,a,I),className:Ne,style:U(U(U(U({"--arrow-x":"".concat(m.x||0,"px"),"--arrow-y":"".concat(m.y||0,"px")},H),V),w),{},{boxSizing:"border-box",zIndex:q},l),onMouseEnter:j,onMouseLeave:Z,onPointerEnter:re,onClick:g},f&&t.createElement(ja,{prefixCls:i,arrow:f,arrowPos:m,align:S}),t.createElement(Ja,{cache:!d&&!P},L))})}))}),Ka=t.forwardRef(function(e,a){var r=e.children,n=e.getTriggerDOMNode,i=Da(r),l=t.useCallback(function(c){Ba(a,n?n(c):c)},[n]),v=Ta(l,r.ref);return i?t.cloneElement(r,{ref:v}):r}),ga=t.createContext(null);function ya(e){return e?Array.isArray(e)?e:[e]:[]}function Za(e,a,r,n){return t.useMemo(function(){var i=ya(r!=null?r:a),l=ya(n!=null?n:a),v=new Set(i),c=new Set(l);return e&&(v.has("hover")&&(v.delete("hover"),v.add("click")),c.has("hover")&&(c.delete("hover"),c.add("click"))),[v,c]},[e,a,r,n])}function Ya(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?e[0]===a[0]:e[0]===a[0]&&e[1]===a[1]}function Xa(e,a,r,n){for(var i=r.points,l=Object.keys(e),v=0;v<l.length;v+=1){var c,d=l[v];if(Ya((c=e[d])===null||c===void 0?void 0:c.points,i,n))return"".concat(a,"-placement-").concat(d)}return""}function Ca(e,a,r,n){return a||(r?{motionName:"".concat(e,"-").concat(r)}:n?{motionName:n}:null)}function mr(e){return e.ownerDocument.defaultView}function la(e){for(var a=[],r=e==null?void 0:e.parentElement,n=["hidden","scroll","clip","auto"];r;){var i=mr(r).getComputedStyle(r),l=i.overflowX,v=i.overflowY,c=i.overflow;[l,v,c].some(function(d){return n.includes(d)})&&a.push(r),r=r.parentElement}return a}function hr(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?a:e}function dr(e){return hr(parseFloat(e),0)}function Ma(e,a){var r=U({},e);return(a||[]).forEach(function(n){if(!(n instanceof HTMLBodyElement||n instanceof HTMLHtmlElement)){var i=mr(n).getComputedStyle(n),l=i.overflow,v=i.overflowClipMargin,c=i.borderTopWidth,d=i.borderBottomWidth,h=i.borderLeftWidth,P=i.borderRightWidth,g=n.getBoundingClientRect(),D=n.offsetHeight,f=n.clientHeight,m=n.offsetWidth,S=n.clientWidth,T=dr(c),E=dr(d),k=dr(h),y=dr(P),u=hr(Math.round(g.width/m*1e3)/1e3),x=hr(Math.round(g.height/D*1e3)/1e3),q=(m-S-k-y)*u,j=(D-f-T-E)*x,Z=T*x,re=E*x,_=k*u,A=y*u,de=0,he=0;if(l==="clip"){var ie=dr(v);de=ie*u,he=ie*x}var me=g.x+_-de,W=g.y+Z-he,B=me+g.width+2*de-_-A-q,M=W+g.height+2*he-Z-re-j;r.left=Math.max(r.left,me),r.top=Math.max(r.top,W),r.right=Math.min(r.right,B),r.bottom=Math.min(r.bottom,M)}}),r}function wa(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(a),n=r.match(/^(.*)\%$/);return n?e*(parseFloat(n[1])/100):parseFloat(r)}function Sa(e,a){var r=a||[],n=b(r,2),i=n[0],l=n[1];return[wa(e.width,i),wa(e.height,l)]}function ba(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function er(e,a){var r=a[0],n=a[1],i,l;return r==="t"?l=e.y:r==="b"?l=e.y+e.height:l=e.y+e.height/2,n==="l"?i=e.x:n==="r"?i=e.x+e.width:i=e.x+e.width/2,{x:i,y:l}}function $e(e,a){var r={t:"b",b:"t",l:"r",r:"l"};return e.map(function(n,i){return i===a?r[n]||"c":n}).join("")}function Oa(e,a,r,n,i,l,v){var c=t.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:i[n]||{}}),d=b(c,2),h=d[0],P=d[1],g=t.useRef(0),D=t.useMemo(function(){return a?la(a):[]},[a]),f=t.useRef({}),m=function(){f.current={}};e||m();var S=Ue(function(){if(a&&r&&e){let ee=function(Se,Ae){var Oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ne,pe=L.x+Se,cr=L.y+Ae,fr=pe+X,Br=cr+H,ea=Math.max(pe,Oe.left),ra=Math.max(cr,Oe.top),aa=Math.min(fr,Oe.right),ta=Math.min(Br,Oe.bottom);return Math.max(0,(aa-ea)*(ta-ra))},xr=function(){Te=L.y+C,ke=Te+H,Le=L.x+N,Ke=Le+X};var k,y,u=a,x=u.ownerDocument,q=mr(u),j=q.getComputedStyle(u),Z=j.width,re=j.height,_=j.position,A=u.style.left,de=u.style.top,he=u.style.right,ie=u.style.bottom,me=u.style.overflow,W=U(U({},i[n]),l),B=x.createElement("div");(k=u.parentElement)===null||k===void 0||k.appendChild(B),B.style.left="".concat(u.offsetLeft,"px"),B.style.top="".concat(u.offsetTop,"px"),B.style.position=_,B.style.height="".concat(u.offsetHeight,"px"),B.style.width="".concat(u.offsetWidth,"px"),u.style.left="0",u.style.top="0",u.style.right="auto",u.style.bottom="auto",u.style.overflow="hidden";var M;if(Array.isArray(r))M={x:r[0],y:r[1],width:0,height:0};else{var Y=r.getBoundingClientRect();M={x:Y.x,y:Y.y,width:Y.width,height:Y.height}}var L=u.getBoundingClientRect(),ue=x.documentElement,ae=ue.clientWidth,ar=ue.clientHeight,qe=ue.scrollWidth,ge=ue.scrollHeight,Qe=ue.scrollTop,te=ue.scrollLeft,H=L.height,X=L.width,le=M.height,se=M.width,je={left:0,top:0,right:ae,bottom:ar},tr={left:-te,top:-Qe,right:qe-te,bottom:ge-Qe},V=W.htmlRegion,Ie="visible",be="visibleFirst";V!=="scroll"&&V!==be&&(V=Ie);var I=V===be,ye=Ma(tr,D),w=Ma(je,D),Ne=V===Ie?w:ye,O=I?w:Ne;u.style.left="auto",u.style.top="auto",u.style.right="0",u.style.bottom="0";var gr=u.getBoundingClientRect();u.style.left=A,u.style.top=de,u.style.right=he,u.style.bottom=ie,u.style.overflow=me,(y=u.parentElement)===null||y===void 0||y.removeChild(B);var Ee=hr(Math.round(X/parseFloat(Z)*1e3)/1e3),We=hr(Math.round(H/parseFloat(re)*1e3)/1e3);if(Ee===0||We===0||ia(r)&&!Ha(r))return;var yr=W.offset,ne=W.targetOffset,Vr=Sa(L,yr),Cr=b(Vr,2),oe=Cr[0],p=Cr[1],ve=Sa(M,ne),Mr=b(ve,2),wr=Mr[0],Ar=Mr[1];M.x-=wr,M.y-=Ar;var Je=W.points||[],J=b(Je,2),Pe=J[0],Ur=J[1],Ce=ba(Ur),G=ba(Pe),Sr=er(M,Ce),nr=er(L,G),De=U({},W),N=Sr.x-nr.x+oe,C=Sr.y-nr.y+p,ce=ee(N,C),fe=ee(N,C,w),ze=er(M,["t","l"]),or=er(L,["t","l"]),ir=er(M,["b","r"]),ur=er(L,["b","r"]),Q=W.overflow||{},qr=Q.adjustX,br=Q.adjustY,Ge=Q.shiftX,lr=Q.shiftY,Pr=function(Ae){return typeof Ae=="boolean"?Ae:Ae>=0},Te,ke,Le,Ke;xr();var sr=Pr(br),vr=G[0]===Ce[0];if(sr&&G[0]==="t"&&(ke>O.bottom||f.current.bt)){var xe=C;vr?xe-=H-le:xe=ze.y-ur.y-p;var Be=ee(N,xe),Qr=ee(N,xe,w);Be>ce||Be===ce&&(!I||Qr>=fe)?(f.current.bt=!0,C=xe,p=-p,De.points=[$e(G,0),$e(Ce,0)]):f.current.bt=!1}if(sr&&G[0]==="b"&&(Te<O.top||f.current.tb)){var F=C;vr?F+=H-le:F=ir.y-or.y-p;var Dr=ee(N,F),jr=ee(N,F,w);Dr>ce||Dr===ce&&(!I||jr>=fe)?(f.current.tb=!0,C=F,p=-p,De.points=[$e(G,0),$e(Ce,0)]):f.current.tb=!1}var Tr=Pr(qr),kr=G[1]===Ce[1];if(Tr&&G[1]==="l"&&(Ke>O.right||f.current.rl)){var He=N;kr?He-=X-se:He=ze.x-ur.x-oe;var Lr=ee(He,C),Ir=ee(He,C,w);Lr>ce||Lr===ce&&(!I||Ir>=fe)?(f.current.rl=!0,N=He,oe=-oe,De.points=[$e(G,1),$e(Ce,1)]):f.current.rl=!1}if(Tr&&G[1]==="r"&&(Le<O.left||f.current.lr)){var Fe=N;kr?Fe+=X-se:Fe=ir.x-or.x-oe;var Rr=ee(Fe,C),Ze=ee(Fe,C,w);Rr>ce||Rr===ce&&(!I||Ze>=fe)?(f.current.lr=!0,N=Fe,oe=-oe,De.points=[$e(G,1),$e(Ce,1)]):f.current.lr=!1}xr();var Me=Ge===!0?0:Ge;typeof Me=="number"&&(Le<w.left&&(N-=Le-w.left-oe,M.x+se<w.left+Me&&(N+=M.x-w.left+se-Me)),Ke>w.right&&(N-=Ke-w.right-oe,M.x>w.right-Me&&(N+=M.x-w.right+Me)));var _e=lr===!0?0:lr;typeof _e=="number"&&(Te<w.top&&(C-=Te-w.top-p,M.y+le<w.top+_e&&(C+=M.y-w.top+le-_e)),ke>w.bottom&&(C-=ke-w.bottom-p,M.y>w.bottom-_e&&(C+=M.y-w.bottom+_e)));var Ye=L.x+N,Xe=Ye+X,we=L.y+C,$r=we+H,Ve=M.x,Re=Ve+se,Nr=M.y,Jr=Nr+le,Gr=Math.max(Ye,Ve),Er=Math.min(Xe,Re),Kr=(Gr+Er)/2,Zr=Kr-Ye,Yr=Math.max(we,Nr),Wr=Math.min($r,Jr),Xr=(Yr+Wr)/2,Or=Xr-we;v==null||v(a,De);var zr=gr.right-L.x-(N+L.width),pr=gr.bottom-L.y-(C+L.height);P({ready:!0,offsetX:N/Ee,offsetY:C/We,offsetR:zr/Ee,offsetB:pr/We,arrowX:Zr/Ee,arrowY:Or/We,scaleX:Ee,scaleY:We,align:De})}}),T=function(){g.current+=1;var y=g.current;Promise.resolve().then(function(){g.current===y&&S()})},E=function(){P(function(y){return U(U({},y),{},{ready:!1})})};return K(E,[n]),K(function(){e||E()},[e]),[h.ready,h.offsetX,h.offsetY,h.offsetR,h.offsetB,h.arrowX,h.arrowY,h.scaleX,h.scaleY,h.align,T]}function pa(e,a,r,n,i){K(function(){if(e&&a&&r){let g=function(){n(),i()};var l=a,v=r,c=la(l),d=la(v),h=mr(v),P=new Set([h].concat(oa(c),oa(d)));return P.forEach(function(D){D.addEventListener("scroll",g,{passive:!0})}),h.addEventListener("resize",g,{passive:!0}),n(),function(){P.forEach(function(D){D.removeEventListener("scroll",g),h.removeEventListener("resize",g)})}}},[e,a,r])}function et(e,a,r,n,i,l,v,c){var d=t.useRef(e),h=t.useRef(!1);d.current!==e&&(h.current=!0,d.current=e),t.useEffect(function(){var P=ca(function(){h.current=!1});return function(){ca.cancel(P)}},[e]),t.useEffect(function(){if(a&&n&&(!i||l)){var P=function(){var q=!1,j=function(_){var A=_.target;q=v(A)},Z=function(_){var A=_.target;!h.current&&d.current&&!q&&!v(A)&&c(!1)};return[j,Z]},g=P(),D=b(g,2),f=D[0],m=D[1],S=P(),T=b(S,2),E=T[0],k=T[1],y=mr(n);y.addEventListener("mousedown",f,!0),y.addEventListener("click",m,!0),y.addEventListener("contextmenu",m,!0);var u=ua(r);return u&&(u.addEventListener("mousedown",E,!0),u.addEventListener("click",k,!0),u.addEventListener("contextmenu",k,!0)),function(){y.removeEventListener("mousedown",f,!0),y.removeEventListener("click",m,!0),y.removeEventListener("contextmenu",m,!0),u&&(u.removeEventListener("mousedown",E,!0),u.removeEventListener("click",k,!0),u.removeEventListener("contextmenu",k,!0))}}},[a,r,n,i,l])}var rt=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function at(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$a,a=t.forwardRef(function(r,n){var i=r.prefixCls,l=i===void 0?"rc-trigger-popup":i,v=r.children,c=r.action,d=c===void 0?"hover":c,h=r.showAction,P=r.hideAction,g=r.popupVisible,D=r.defaultPopupVisible,f=r.onPopupVisibleChange,m=r.afterPopupVisibleChange,S=r.mouseEnterDelay,T=r.mouseLeaveDelay,E=T===void 0?.1:T,k=r.focusDelay,y=r.blurDelay,u=r.mask,x=r.maskClosable,q=x===void 0?!0:x,j=r.getPopupContainer,Z=r.forceRender,re=r.autoDestroy,_=r.destroyPopupOnHide,A=r.popup,de=r.popupClassName,he=r.popupStyle,ie=r.popupPlacement,me=r.builtinPlacements,W=me===void 0?{}:me,B=r.popupAlign,M=r.zIndex,Y=r.stretch,L=r.getPopupClassNameFromAlign,ue=r.fresh,ae=r.alignPoint,ar=r.onPopupClick,qe=r.onPopupAlign,ge=r.arrow,Qe=r.popupMotion,te=r.maskMotion,H=r.popupTransitionName,X=r.popupAnimation,le=r.maskTransitionName,se=r.maskAnimation,je=r.className,tr=r.getTriggerDOMNode,V=Na(r,rt),Ie=re||_||!1,be=t.useState(!1),I=b(be,2),ye=I[0],w=I[1];K(function(){w(Fa())},[]);var Ne=t.useRef({}),O=t.useContext(ga),gr=t.useMemo(function(){return{registerSubPopup:function(s,R){Ne.current[s]=R,O==null||O.registerSubPopup(s,R)}}},[O]),Ee=_a(),We=t.useState(null),yr=b(We,2),ne=yr[0],Vr=yr[1],Cr=Ue(function(o){ia(o)&&ne!==o&&Vr(o),O==null||O.registerSubPopup(Ee,o)}),oe=t.useState(null),p=b(oe,2),ve=p[0],Mr=p[1],wr=t.useRef(null),Ar=Ue(function(o){ia(o)&&ve!==o&&(Mr(o),wr.current=o)}),Je=t.Children.only(v),J=(Je==null?void 0:Je.props)||{},Pe={},Ur=Ue(function(o){var s,R,z=ve;return(z==null?void 0:z.contains(o))||((s=ua(z))===null||s===void 0?void 0:s.host)===o||o===z||(ne==null?void 0:ne.contains(o))||((R=ua(ne))===null||R===void 0?void 0:R.host)===o||o===ne||Object.values(Ne.current).some(function($){return($==null?void 0:$.contains(o))||o===$})}),Ce=Ca(l,Qe,X,H),G=Ca(l,te,se,le),Sr=t.useState(D||!1),nr=b(Sr,2),De=nr[0],N=nr[1],C=g!=null?g:De,ce=Ue(function(o){g===void 0&&N(o)});K(function(){N(g||!1)},[g]);var fe=t.useRef(C);fe.current=C;var ze=t.useRef([]);ze.current=[];var or=Ue(function(o){var s;ce(o),((s=ze.current[ze.current.length-1])!==null&&s!==void 0?s:C)!==o&&(ze.current.push(o),f==null||f(o))}),ir=t.useRef(),ur=function(){clearTimeout(ir.current)},Q=function(s){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ur(),R===0?or(s):ir.current=setTimeout(function(){or(s)},R*1e3)};t.useEffect(function(){return ur},[]);var qr=t.useState(!1),br=b(qr,2),Ge=br[0],lr=br[1];K(function(o){(!o||C)&&lr(!0)},[C]);var Pr=t.useState(null),Te=b(Pr,2),ke=Te[0],Le=Te[1],Ke=t.useState([0,0]),sr=b(Ke,2),vr=sr[0],xe=sr[1],Be=function(s){xe([s.clientX,s.clientY])},Qr=Oa(C,ne,ae?vr:ve,ie,W,B,qe),F=b(Qr,11),Dr=F[0],jr=F[1],Tr=F[2],kr=F[3],He=F[4],Lr=F[5],Ir=F[6],Fe=F[7],Rr=F[8],Ze=F[9],Me=F[10],_e=Za(ye,d,h,P),Ye=b(_e,2),Xe=Ye[0],we=Ye[1],$r=Xe.has("click"),Ve=we.has("click")||we.has("contextMenu"),Re=Ue(function(){Ge||Me()}),Nr=function(){fe.current&&ae&&Ve&&Q(!1)};pa(C,ve,ne,Re,Nr),K(function(){Re()},[vr,ie]),K(function(){C&&!(W!=null&&W[ie])&&Re()},[JSON.stringify(B)]);var Jr=t.useMemo(function(){var o=Xa(W,l,Ze,ae);return rr(o,L==null?void 0:L(Ze))},[Ze,L,W,l,ae]);t.useImperativeHandle(n,function(){return{nativeElement:wr.current,forceAlign:Re}});var Gr=t.useState(0),Er=b(Gr,2),Kr=Er[0],Zr=Er[1],Yr=t.useState(0),Wr=b(Yr,2),Xr=Wr[0],Or=Wr[1],zr=function(){if(Y&&ve){var s=ve.getBoundingClientRect();Zr(s.width),Or(s.height)}},pr=function(){zr(),Re()},ee=function(s){lr(!1),Me(),m==null||m(s)},xr=function(){return new Promise(function(s){zr(),Le(function(){return s})})};K(function(){ke&&(Me(),ke(),Le(null))},[ke]);function Se(o,s,R,z){Pe[o]=function($){var Hr;z==null||z($),Q(s,R);for(var na=arguments.length,sa=new Array(na>1?na-1:0),Fr=1;Fr<na;Fr++)sa[Fr-1]=arguments[Fr];(Hr=J[o])===null||Hr===void 0||Hr.call.apply(Hr,[J,$].concat(sa))}}($r||Ve)&&(Pe.onClick=function(o){var s;fe.current&&Ve?Q(!1):!fe.current&&$r&&(Be(o),Q(!0));for(var R=arguments.length,z=new Array(R>1?R-1:0),$=1;$<R;$++)z[$-1]=arguments[$];(s=J.onClick)===null||s===void 0||s.call.apply(s,[J,o].concat(z))}),et(C,Ve,ve,ne,u,q,Ur,Q);var Ae=Xe.has("hover"),Oe=we.has("hover"),pe,cr;Ae&&(Se("onMouseEnter",!0,S,function(o){Be(o)}),Se("onPointerEnter",!0,S,function(o){Be(o)}),pe=function(){(C||Ge)&&Q(!0,S)},ae&&(Pe.onMouseMove=function(o){var s;(s=J.onMouseMove)===null||s===void 0||s.call(J,o)})),Oe&&(Se("onMouseLeave",!1,E),Se("onPointerLeave",!1,E),cr=function(){Q(!1,E)}),Xe.has("focus")&&Se("onFocus",!0,k),we.has("focus")&&Se("onBlur",!1,y),Xe.has("contextMenu")&&(Pe.onContextMenu=function(o){var s;fe.current&&we.has("contextMenu")?Q(!1):(Be(o),Q(!0)),o.preventDefault();for(var R=arguments.length,z=new Array(R>1?R-1:0),$=1;$<R;$++)z[$-1]=arguments[$];(s=J.onContextMenu)===null||s===void 0||s.call.apply(s,[J,o].concat(z))}),je&&(Pe.className=rr(J.className,je));var fr=U(U({},J),Pe),Br={},ea=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];ea.forEach(function(o){V[o]&&(Br[o]=function(){for(var s,R=arguments.length,z=new Array(R),$=0;$<R;$++)z[$]=arguments[$];(s=fr[o])===null||s===void 0||s.call.apply(s,[fr].concat(z)),V[o].apply(V,z)})});var ra=t.cloneElement(Je,U(U({},fr),Br)),aa={x:Lr,y:Ir},ta=ge?U({},ge!==!0?ge:{}):null;return t.createElement(t.Fragment,null,t.createElement(ka,{disabled:!C,ref:Ar,onResize:pr},t.createElement(Ka,{getTriggerDOMNode:tr},ra)),t.createElement(ga.Provider,{value:gr},t.createElement(Ga,{portal:e,ref:Cr,prefixCls:l,popup:A,className:rr(de,Jr),style:he,target:ve,onMouseEnter:pe,onMouseLeave:cr,onPointerEnter:pe,zIndex:M,open:C,keepDom:Ge,fresh:ue,onClick:ar,mask:u,motion:Ce,maskMotion:G,onVisibleChanged:ee,onPrepare:xr,forceRender:Z,autoDestroy:Ie,getPopupContainer:j,align:Ze,arrow:ta,arrowPos:aa,ready:Dr,offsetX:jr,offsetY:Tr,offsetR:kr,offsetB:He,onAlign:Re,stretch:Y,targetWidth:Kr/Fe,targetHeight:Xr/Rr})))});return a}const ct=at($a);export{$a as P,ct as T};
